---
title: How to automate Vitepress Blog Index
date: 2025-01-22T09:15:44.397Z
tags: ["VitePress"]
---

Today's learning about VitePress covered several key aspects:

## Theme Customization

- Extended the default VitePress theme to add custom features
- Created a custom layout component (`MyLayout.vue`)
- Added post metadata display (date and tags)
- Implemented tag badges with custom styling

## Blog Automation

- Created a unified blog utility script (`blog-utils.js`)
- Automated post creation with datetime stamping
- Implemented automatic category page generation
- Added blog index generation based on post tags

### Key Script: blog-utils.js

````javascript
// Create a new blog post with datetime stamp
function createPost(title) {
  const now = new Date();
  const date = now.toISOString().split("T")[0];
  const time = now.toTimeString().split(" ")[0].replace(/:/g, "-");
  const fileName = `${title
    .toLowerCase()
    .replace(/\s+/g, "-")}-${date}-${time}.md`;

  const template = ```
---
title: ${title}
date: ${now.toISOString()}
tags: []
---

# ${title}
```;
  // ... save file logic
}

// Update blog index based on first tag
function updateBlogIndex() {
  const files = fs
    .readdirSync(POSTS_DIR)
    .filter((file) => file.endsWith(".md"));
  const categoriesMap = {};

  files.forEach((file) => {
    const { data } = matter(fs.readFileSync(filePath, "utf-8"));
    const firstTag = data.tags?.[0] || "Uncategorized";

    if (!categoriesMap[firstTag]) {
      categoriesMap[firstTag] = [];
    }

    categoriesMap[firstTag].push({
      text: data.title || "Untitled",
      link: `/blog/posts/${file.replace(".md", "")}`,
      date: data.date,
    });
  });
  // ... generate and save index
}
````

### Using blogIndex.js

The generated blog index can be imported and used in components:

```javascript
import blogIndex from "../../scripts/blogIndex";

// Example structure of blogIndex:
const blogIndex = [
  {
    text: "VitePress",
    items: [
      {
        text: "Post Title",
        link: "/blog/posts/post-title-2025-01-22-20-15-44",
        date: "2025-01-22T09:15:44.397Z",
      },
    ],
  },
];
```

## Key Features Implemented

1. **Post Metadata Display**

   - Date/time stamps for posts
   - Tag badges with custom styling
   - Category-based organization

2. **Automated Workflows**

   - `npm run blog:new "Post Title"` - Create new posts
   - `npm run blog:update` - Update index and categories
   - Automatic index updates during build

3. **Directory Structure**
   - Organized posts by categories
   - Generated category pages automatically
   - Maintained clean URL structure
